{"primaryContentSections":[{"declarations":[{"languages":["swift"],"tokens":[{"text":"typealias","kind":"keyword"},{"kind":"text","text":" "},{"text":"ClassInitFunc","kind":"identifier"},{"text":" = ","kind":"text"},{"text":"GClassInitFunc","kind":"typeIdentifier","preciseIdentifier":"c:gtype.h@T@GClassInitFunc"}],"platforms":["macOS"]}],"kind":"declarations"},{"content":[{"anchor":"discussion","type":"heading","level":2,"text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This function should initialize all static class members."}]},{"type":"paragraph","inlineContent":[{"text":"The initialization process of a class involves:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Copying common members from the parent class over to the","type":"text"},{"type":"text","text":" "},{"type":"text","text":"derived class structure."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Zero initialization of the remaining members not copied","type":"text"},{"type":"text","text":" "},{"type":"text","text":"over from the parent class."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Invocation of the "},{"code":"GBaseInitFunc()","type":"codeVoice"},{"type":"text","text":" initializers of all parent"},{"type":"text","text":" "},{"type":"text","text":"types and the class’ type."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Invocation of the class’ "},{"code":"GClassInitFunc()","type":"codeVoice"},{"text":" initializer.","type":"text"}]}]}]},{"inlineContent":[{"text":"Since derived classes are partially initialized through a memory copy","type":"text"},{"type":"text","text":" "},{"text":"of the parent class, the general rule is that ","type":"text"},{"type":"codeVoice","code":"GBaseInitFunc()"},{"type":"text","text":" and"},{"text":" ","type":"text"},{"type":"codeVoice","code":"GBaseFinalizeFunc()"},{"type":"text","text":" should take care of necessary reinitialization"},{"text":" ","type":"text"},{"text":"and release of those class members that were introduced by the type","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"that specified these "},{"type":"codeVoice","code":"GBaseInitFunc()``\/GBaseFinalizeFunc()"},{"text":".","type":"text"},{"type":"text","text":" "},{"type":"codeVoice","code":"GClassInitFunc()"},{"type":"text","text":" should only care about initializing static"},{"type":"text","text":" "},{"text":"class members, while dynamic class members (such as allocated strings","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"or reference counted resources) are better handled by a "},{"code":"GBaseInitFunc()","type":"codeVoice"},{"text":" ","type":"text"},{"text":"for this type, so proper initialization of the dynamic class members","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"is performed for class initialization of derived types as well."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"An example may help to correspond the intend of the different class"},{"type":"text","text":" "},{"type":"text","text":"initializers:"}]},{"type":"paragraph","inlineContent":[{"text":"(C Language Example):","type":"text"}]},{"syntax":"C","type":"codeListing","code":["typedef struct {","  GObjectClass parent_class;","  gint         static_integer;","  gchar       *dynamic_string;","} TypeAClass;","static void","type_a_base_class_init (TypeAClass *class)","{","  class->dynamic_string = g_strdup (\"some string\");","}","static void","type_a_base_class_finalize (TypeAClass *class)","{","  g_free (class->dynamic_string);","}","static void","type_a_class_init (TypeAClass *class)","{","  class->static_integer = 42;","}","","typedef struct {","  TypeAClass   parent_class;","  gfloat       static_float;","  GString     *dynamic_gstring;","} TypeBClass;","static void","type_b_base_class_init (TypeBClass *class)","{","  class->dynamic_gstring = g_string_new (\"some other string\");","}","static void","type_b_base_class_finalize (TypeBClass *class)","{","  g_string_free (class->dynamic_gstring);","}","static void","type_b_class_init (TypeBClass *class)","{","  class->static_float = 3.14159265358979323846;","}"]},{"inlineContent":[{"text":"Initialization of TypeBClass will first cause initialization of","type":"text"},{"text":" ","type":"text"},{"text":"TypeAClass (derived classes reference their parent classes, see","type":"text"},{"text":" ","type":"text"},{"type":"codeVoice","code":"g_type_class_ref()"},{"type":"text","text":" on this)."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Initialization of TypeAClass roughly involves zero-initializing its fields,"},{"type":"text","text":" "},{"text":"then calling its ","type":"text"},{"code":"GBaseInitFunc()","type":"codeVoice"},{"text":" ","type":"text"},{"type":"codeVoice","code":"type_a_base_class_init()"},{"type":"text","text":" to allocate"},{"text":" ","type":"text"},{"type":"text","text":"its dynamic members (dynamic_string), and finally calling its "},{"type":"codeVoice","code":"GClassInitFunc()"},{"text":" ","type":"text"},{"code":"type_a_class_init()","type":"codeVoice"},{"text":" to initialize its static members (static_integer).","type":"text"},{"type":"text","text":" "},{"type":"text","text":"The first step in the initialization process of TypeBClass is then"},{"type":"text","text":" "},{"type":"text","text":"a plain memory copy of the contents of TypeAClass into TypeBClass and"},{"type":"text","text":" "},{"text":"zero-initialization of the remaining fields in TypeBClass.","type":"text"},{"text":" ","type":"text"},{"text":"The dynamic members of TypeAClass within TypeBClass now need","type":"text"},{"type":"text","text":" "},{"text":"reinitialization which is performed by calling ","type":"text"},{"code":"type_a_base_class_init()","type":"codeVoice"},{"type":"text","text":" "},{"text":"with an argument of TypeBClass.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"After that, the "},{"code":"GBaseInitFunc()","type":"codeVoice"},{"type":"text","text":" of TypeBClass, "},{"code":"type_b_base_class_init()","type":"codeVoice"},{"text":" ","type":"text"},{"type":"text","text":"is called to allocate the dynamic members of TypeBClass (dynamic_gstring),"},{"text":" ","type":"text"},{"type":"text","text":"and finally the "},{"type":"codeVoice","code":"GClassInitFunc()"},{"type":"text","text":" of TypeBClass, "},{"type":"codeVoice","code":"type_b_class_init()"},{"text":",","type":"text"},{"text":" ","type":"text"},{"text":"is called to complete the initialization process with the static members","type":"text"},{"text":" ","type":"text"},{"text":"(static_float).","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Corresponding finalization counter parts to the "},{"type":"codeVoice","code":"GBaseInitFunc()"},{"type":"text","text":" functions"},{"type":"text","text":" "},{"type":"text","text":"have to be provided to release allocated resources at class finalization"},{"text":" ","type":"text"},{"text":"time.","type":"text"}]}],"kind":"content"}],"metadata":{"navigatorTitle":[{"text":"ClassInitFunc","kind":"identifier"}],"symbolKind":"typealias","fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ClassInitFunc"}],"roleHeading":"Type Alias","externalID":"s:10GLibObject13ClassInitFunca","title":"ClassInitFunc","role":"symbol","modules":[{"name":"GLibObject"}]},"abstract":[{"type":"text","text":"A callback function used by the type system to initialize the class"},{"text":" ","type":"text"},{"type":"text","text":"of a specific type."}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/glibobject\/classinitfunc"]}],"sections":[],"hierarchy":{"paths":[["doc:\/\/GLibObject\/documentation\/GLibObject"]]},"kind":"symbol","schemaVersion":{"major":0,"minor":3,"patch":0},"identifier":{"url":"doc:\/\/GLibObject\/documentation\/GLibObject\/ClassInitFunc","interfaceLanguage":"swift"},"references":{"doc://GLibObject/documentation/GLibObject/ClassInitFunc":{"fragments":[{"kind":"keyword","text":"typealias"},{"text":" ","kind":"text"},{"text":"ClassInitFunc","kind":"identifier"}],"title":"ClassInitFunc","kind":"symbol","identifier":"doc:\/\/GLibObject\/documentation\/GLibObject\/ClassInitFunc","url":"\/documentation\/glibobject\/classinitfunc","abstract":[{"text":"A callback function used by the type system to initialize the class","type":"text"},{"type":"text","text":" "},{"text":"of a specific type.","type":"text"}],"type":"topic","navigatorTitle":[{"kind":"identifier","text":"ClassInitFunc"}],"role":"symbol"},"doc://GLibObject/documentation/GLibObject":{"role":"collection","kind":"symbol","abstract":[],"identifier":"doc:\/\/GLibObject\/documentation\/GLibObject","url":"\/documentation\/glibobject","title":"GLibObject","type":"topic"}}}